<div>
    <mat-tab-group #tabs animationDuration="0ms" dynamicHeight>
        <mat-tab *ngFor="let loanTitle of this.loansTitles; let credit_index = index" label="[ {{loanTitle[0]}} ] - {{loanTitle[1]}}" >
            <div class="amortization-table">
                <table mat-table [dataSource]="this.amortizationTableData[credit_index]" class="table-hover w-100" matSort>

                    <ng-container matColumnDef="echeanceNumber">
                        <th mat-header-cell *matHeaderCellDef>{{ this.amortizationTableHeaders[credit_index][0] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.echeanceNumber}} </td>
                    </ng-container>
        
                    <ng-container matColumnDef="amortissement">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][1] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.amortissement}} </td>
                    </ng-container>
        
                    <ng-container matColumnDef="interets">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][2] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.interets}} </td>
                    </ng-container>
        

                    <!-- 1 INSURANCE -->
                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 7" matColumnDef="assurance">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][3] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance}} </td>
                    </ng-container>

                    <!-- 2 INSURANCES -->
                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 8" matColumnDef="assurance1">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][3] }} </th>                        <td mat-cell *matCellDef="let element"> {{element.assurance1}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 8" matColumnDef="assurance2">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][4] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance2}} </td>
                    </ng-container>

                    <!-- 3 INSURANCES -->
                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 9" matColumnDef="assurance1">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][3] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance1}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 9" matColumnDef="assurance2">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][4] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance2}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 9" matColumnDef="assurance3">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][5] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance3}} </td>
                    </ng-container>

                    <!-- 4 INSURANCES -->
                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 10" matColumnDef="assurance1">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][3] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance1}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 10" matColumnDef="assurance2">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][4] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance2}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 10" matColumnDef="assurance3">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][5] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance3}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 10" matColumnDef="assurance4">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][6] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance4}} </td>
                    </ng-container>


                    <!-- 5 INSURANCES -->
                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 11" matColumnDef="assurance1">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][3] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance1}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 11" matColumnDef="assurance2">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][4] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance2}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 11" matColumnDef="assurance3">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][5] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance3}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 11" matColumnDef="assurance4">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][6] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance4}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 11" matColumnDef="assurance5">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][7] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance5}} </td>
                    </ng-container>


                    <!-- 6 INSURANCES -->
                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 12" matColumnDef="assurance1">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][3] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance1}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 12" matColumnDef="assurance2">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][4] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance2}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 12" matColumnDef="assurance3">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][5] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance3}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 12" matColumnDef="assurance4">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][6] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance4}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 12" matColumnDef="assurance5">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][7] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance5}} </td>
                    </ng-container>

                    <ng-container *ngIf="this.amortizationTableHeaders[credit_index].length === 12" matColumnDef="assurance6">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][8] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.assurance6}} </td>
                    </ng-container>



                    <ng-container matColumnDef="capitalRestantDu">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][this.amortizationTableHeaders[credit_index].length-3] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.capitalRestantDu}} </td>
                    </ng-container>
                    <ng-container matColumnDef="echeance">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][this.amortizationTableHeaders[credit_index].length-2] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.echeance}} </td>
                    </ng-container>
                    <ng-container matColumnDef="montant">
                        <th mat-header-cell *matHeaderCellDef> {{ this.amortizationTableHeaders[credit_index][this.amortizationTableHeaders[credit_index].length-1] }} </th>
                        <td mat-cell *matCellDef="let element"> {{element.montant}} </td>
                    </ng-container>
        
                    <tr mat-header-row *matHeaderRowDef="displayedColumns[credit_index];"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns[credit_index];" class="cursor"></tr>
                </table>
            </div>
            
            <!-- <table class="table table-hover">
                <thead>
                    <tr>
                        <th class='text-right' *ngFor="let header of this.amortizationTableHeader">
                            {{header}}
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of this.amortizationTableData[credit_index]; let i = index">
                        <td class='text-right' *ngFor="let data of this.amortizationTableData[credit_index][i]">
                            {{data}}
                        </td>
                    </tr>
                </tbody>
            </table> -->
        </mat-tab>
    </mat-tab-group>
</div>